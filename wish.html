<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Logic Realm | Contact</title>
  <link rel="icon" type="image/x-icon" href="img/icon.ico" />
  <link rel="stylesheet" type="text/css" href="style2.css" />
  <script src="https://kit.fontawesome.com/171e689b28.js" crossorigin="anonymous"></script>
</head>

<body>
  <header>
    <div class="container">
      <h1>Logic Realm</h1>
      <div class="menu-toggle">
        <input type="checkbox" />
        <span></span>
        <span></span>
        <span></span>
      </div>
      <nav>
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="all-apps.html">Softwares</a></li>
          <li>
            <a href="https://www.skillfolio.rf.gd/" target="_blank">About</a>
          </li>
          <li><a class="active" href="#">Wish</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <section id="contact">
    <div id="cont-form" class="cont-form">
      <h2>Wish Us</h2>
      <p>
        Tell Us about your wish. We will do our best to work with perfection.
      </p>
      <form method="post" id="contact-form">
        <label for="cnt-name">Your Full Name:-</label>
        <input type="text" placeholder="Name" name="name" id="cnt-name" required />
        <label for="cnt-email">Your Email Address:-</label>
        <input type="email" placeholder="Email" name="email" id="cnt-email" required />
        <label for="cnt-drop">Wish Category:-</label>
        <select id="cnt-drop" name="category" required>
          <option value="" selected>- Select Your Category -</option>
          <option value="Web Development">Web Development</option>
          <option value="Software Development">Software Development</option>
          <option value="Graphics Design">Graphics Design</option>
          <option value="Web Design">Web Design</option>
          <option value="Video Editing">Video Editing</option>
          <option value="SEO">SEO</option>
        </select>
        <label for="budget">Your Budget:- &nbsp; (USD)</label>
        <input type="number" placeholder="Your Budget" name="budget" id="budget" min required>
        <label for="cnt-msg">Wish Details:-</label>
        <textarea placeholder="Give the full description of your work in order to achieve perfection." name="details"
          id="cnt-msg" required></textarea>
        <button name="submit" id="form-submit" type="submit">Send</button>
      </form>
    </div>

    <div id="popup" class="popup">
      <span id="gicon" class="gift-icon">
        <i class="fa-solid fa-gift"></i>
      </span>
      <h3 id="result-msg"></h3>
      <p id="order-id"></p>
      <button id="msg-close" onclick="closeMessage();">Close</button>
    </div>

    <div id="jin" class="jin">
      <img src="img/jin-2.png" alt="Image of a Jin">
    </div>
  </section>

  <footer>
    <div class="cont">
      <p>&copy; 2023 Logic Realm. All rights reserved.</p>
    </div>
  </footer>
</body>
<script>
  document.getElementById("contact-form").addEventListener("submit", async (e) => {
    e.preventDefault();
    let name = document.getElementById("cnt-name").value;
    let email = document.getElementById("cnt-email").value;
    let category = document.getElementById("cnt-drop").value;
    let budget = document.getElementById("budget").value;
    let details = document.getElementById("cnt-msg").value;
    const url = "https://logicrealm.rf.gd/api/order/newOrder.php";

    try {
      const response = await fetch(url, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ name, email, budget, category, details })
      });
      const json = await response.json();
      message(json['response_desc'], json['order_id'])
    } catch (error) {
      message("Something is Wrong", null)
    }
  })

  function message(msg, orderId) {
    let popup = document.getElementById("popup");
    let gicon = document.getElementById("gicon");
    let jin = document.getElementById("jin");
    let form = document.getElementById("cont-form");

    jin.classList.add("blur-filter");
    form.classList.add("blur-filter");
    popup.classList.remove("popup");
    popup.classList.add("poped-msg");
    gicon.classList.remove("gift-icon");
    gicon.classList.add("poped-gift");
    document.getElementById("msg-close").style.visibility = "visible";
    document.getElementById("result-msg").innerText = msg;
    if (orderId !== null) {
      document.getElementById("order-id").innerText = "Your Order ID is " + orderId;
      document.getElementById("contact-form").reset();
    }
  }

  function closeMessage() {
    let popup = document.getElementById("popup");
    let gicon = document.getElementById("gicon");
    let jin = document.getElementById("jin");
    let form = document.getElementById("cont-form");

    document.getElementById("msg-close").style.visibility = "hidden";
    document.getElementById("result-msg").innerText = "";
    document.getElementById("order-id").innerText = "";
    popup.classList.remove("poped-msg");
    popup.classList.add("popup");
    gicon.classList.remove("poped-gift");
    gicon.classList.add("gift-icon");
    jin.classList.remove("blur-filter");
    form.classList.remove("blur-filter");
  }
</script>
<script src="script.js"></script>

</html>